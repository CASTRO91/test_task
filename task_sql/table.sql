DROP VIEW IF EXISTS SUM_CREDIT;
DROP TABLE IF EXISTS USAPF;
DROP TABLE IF EXISTS USCPF;
DROP TABLE IF EXISTS UGFPF;

CREATE TABLE UGFPF (
    UGFCPNC char(6) PRIMARY KEY UNIQUE,  /* Уникальный номер клиента текст(6) *Уникальный ключ */ 
         
    UGFCUN  char(35),                    /* Полное наименование клиента  текст(35) */ 
         
    UGFSCUN char(15),                    /* Краткое наименование клиента текст(15) */ 
         
    UGFCTP  decimal(2,0),                /* Тип клиента число 2, 0 */ 
         
    UGFDCE  decimal(7,0),                /* Дата ввода клиента число 7, 0 */ 
         
    UGFRD   char(3)                      /* Ответственный отдел текст (3) */ 
);


CREATE TABLE USCPF (
    USCCPNC char(6),                      /* Уникальный номер клиента текст(6) */
        
    USCIBAN char(28) PRIMARY KEY UNIQUE,  /* Номер счета в формате IBAN   текст(28) */
        
    USCDOA  decimal(7,0),                 /* Дата открытия счета число 7, 0 */ 
        
    USCDCA  decimal(7,0),                 /* Дата закрытия счета число 7, 0 */ 
        
    USCCCY  char(6),                       /* Валюта счета  (ISO мнемоника) текст(3) */ 
   
 FOREIGN KEY (USCCPNC) REFERENCES UGFPF(UGFCPNC) ON DELETE CASCADE
);


CREATE TABLE USAPF (
    USAIBAN char(28),                     /* Номер счета в формате IBAN   текст(28) */
       
    USADOM decimal(7,0),                  /* Дата движения число 7, 0 */
       
    USATA  char(1) 
    CHECK (USATA in ('C','D')),           /* Тип (кредитовое - ‘C’/дебетовое - ‘D’) текст(1) */   

    USAAMA decimal(15,2),                 /* Сумма число 15, 2 */
       
    USACCY char(3),                       /* Валюта счета  (ISO мнемоника) текст(3) */
 
 FOREIGN KEY  (USAIBAN)  REFERENCES USCPF(USCIBAN) ON DELETE CASCADE
);

INSERT INTO UGFPF VALUES 
('UR2C8A','EGNP9L4NFL4XWEYDXH98SBXKXCJX19VX8AJ','EGNP9L4NFL4XWEY',2,1010522,'BTS'),
('UR2C4P','B6HU69ZB1O6HKSIZMB03TJX8ORHRFOKWXDV','B6HU69ZB1O6HKSI',1,1110422,'YTE'),
('UR2C9E','XGNT9VR6MDCF3W7SXTT575VGMRG21G49E8S','XGNT9VR6MDCF3W7',1,1130522,'YTE');



INSERT INTO USCPF VALUES 
('UR2C8A','BY71BELB57143172074459394177',1010522,1010622,'BYN'),
('UR2C4P','BY36BELB37214615859519402296',1110422,9999999,'BYN'),
('UR2C9E','BY02BELB94865949249644984573',1130522,9999999,'BYN'),
('UR2C4P','BY75BELB37631900456958086315',1180104,1190701,'USD'),
('UR2C9E','BY95BELB70101394215538659885',1180911,9999999,'USD'),
('UR2C8A','BY50BELB51621481725406880044',1190504,9999999,'EUR'),
('UR2C8A','BY50BELB14710165717344342529',1190601,9999999,'USD');



INSERT INTO USAPF VALUES
('BY71BELB57143172074459394177',1010522,'D',1024,'BYN'),
('BY71BELB57143172074459394177',1010612,'C',1000.5,'BYN'),
('BY71BELB57143172074459394177',1010622,'C',23.5,'BYN'),
('BY36BELB37214615859519402296',1110422,'D',8999.11,'BYN'),
('BY36BELB37214615859519402296',1110822,'C',45.67,'BYN'),
('BY02BELB94865949249644984573',1130522,'D',454.53,'BYN'),
('BY36BELB37214615859519402296',1130722,'D',48.11,'BYN'),
('BY02BELB94865949249644984573',1130722,'C',44.52,'BYN'),
('BY75BELB37631900456958086315',1180104,'D',778.47,'USD'),
('BY95BELB70101394215538659885',1180911,'D',26555.44,'USD'),
('BY50BELB51621481725406880044',1190504,'D',66155.16,'EUR'),
('BY50BELB14710165717344342529',1190601,'D',986.36,'USD'),
('BY75BELB37631900456958086315',1190701,'C',778.47,'USD'),
('BY36BELB37214615859519402296',1190701,'C',4343.12,'BYN'),
('BY02BELB94865949249644984573',1190701,'D',1800,'BYN'),
('BY95BELB70101394215538659885',1190702,'D',50000,'USD'),
('BY50BELB51621481725406880044',1190702,'D',250000.98,'EUR'),
('BY50BELB14710165717344342529',1190703,'D',25000.54,'USD'),
('BY95BELB70101394215538659885',1190704,'C',78.33,'USD'),
('BY02BELB94865949249644984573',1190705,'C',356.44,'BYN'),
('BY50BELB51621481725406880044',1190705,'D',67088.88,'EUR'),
('BY95BELB70101394215538659885',1190706,'C',5600.32,'USD'),
('BY50BELB51621481725406880044',1190706,'C',100000.11,'EUR'),
('BY36BELB37214615859519402296',1190707,'D',836,'BYN'),
('BY50BELB51621481725406880044',1190707,'D',300000.12,'EUR'),
('BY50BELB14710165717344342529',1190708,'C',10000,'USD'),
('BY95BELB70101394215538659885',1190709,'D',7899.36,'USD'),
('BY36BELB37214615859519402296',1190710,'D',855.23,'BYN'),
('BY50BELB14710165717344342529',1190711,'C',550.45,'USD'),
('BY02BELB94865949249644984573',1190712,'D',489.9,'BYN'),
('BY50BELB14710165717344342529',1190713,'C',245.35,'USD'),
('BY36BELB37214615859519402296',1190713,'C',343.12,'BYN'),
('BY50BELB51621481725406880044',1190714,'C',2122.33,'EUR'),
('BY95BELB70101394215538659885',1190714,'C',8987,'USD'),
('BY02BELB94865949249644984573',1190715,'C',37,'BYN'),
('BY50BELB14710165717344342529',1190716,'D',6500.45,'USD'),
('BY02BELB94865949249644984573',1190716,'D',69.7,'BYN'),
('BY50BELB51621481725406880044',1190717,'D',450000.55,'EUR'),
('BY36BELB37214615859519402296',1190718,'C',556.23,'BYN'),
('BY50BELB14710165717344342529',1190719,'C',855,'USD'),
('BY02BELB94865949249644984573',1190720,'D',97.7,'BYN'),
('BY50BELB14710165717344342529',1190721,'D',235,'USD'),
('BY95BELB70101394215538659885',1190721,'D',8788,'USD'),
('BY36BELB37214615859519402296',1190722,'D',6789,'BYN'),
('BY50BELB14710165717344342529',1190723,'C',400.23,'USD'),
('BY50BELB51621481725406880044',1190724,'C',200000,'EUR'),
('BY02BELB94865949249644984573',1190725,'C',798.8,'BYN'),
('BY50BELB14710165717344342529',1190726,'D',5000,'USD'),
('BY95BELB70101394215538659885',1190727,'C',5600,'USD'),
('BY36BELB37214615859519402296',1190728,'C',1000,'BYN'),
('BY50BELB14710165717344342529',1190728,'C',2500.34,'USD'),
('BY02BELB94865949249644984573',1190729,'C',964.64,'BYN'),
('BY50BELB51621481725406880044',1190730,'D',89000.96,'EUR'),
('BY36BELB37214615859519402296',1190731,'D',445.22,'BYN'),
('BY95BELB70101394215538659885',1190731,'C',457,'USD');
                                  
                                                           